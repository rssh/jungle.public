<?xml version="1.0"?>
<project name="net.edwardstx.proxy" default="build" basedir="." >

<!-- proeprties -->

<property file="build.properties" />

<condition property="ivy.int.home" value="${ivy.home}" else="${user.home}/.ivy">
  <isset property="ivy.home" />
</condition>
<!--<property name="ivy.lib.dir" value="${ivy.int.home}/cache" />  -->
  
<!-- targets -->

 <target name="clean">
  <delete>
   <fileset dir="src"   includes="**/*.class" />
  </delete>
 </target>

 <path id="compile.path">
   <fileset dir="lib">
    <include name="*.jar" />
   </fileset>
 </path>

 <target name="build" depends="retrieve-libs">
  <javac srcdir="src" includes="**/*.java" deprecation="on" debug="${debug}" >
    <classpath refid="compile.path" />
  </javac>
  <war destfile="target/ajaxproxy-${version}.war" webxml="WEB-INF/web.xml">
   <lib dir="lib" includes="*.jar" excludes="javaee-api-*.jar" />
   <classes dir="src" includes="**/*.class" />
  </war>
 </target>

 <target name="retrieve-libs">
  <ant antfile="build-ivy.xml" target="retrieve-libs" />
 </target>

</project>
